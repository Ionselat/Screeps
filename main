
var roleManager = require("roleManager");
var spawn = Game.spawns['Spawn1'];

module.exports.loop = function () {
    if(spawn.energy >= 200)
    {

        if (typeof Game.creeps['Harvester1'] == 'undefined'){
            spawn.createCreep([WORK, CARRY, CARRY, MOVE], 'Harvester1', {role: 'harvester'});}

        else if (typeof Game.creeps['Upgrader1'] == 'undefined'){
            spawn.createCreep([WORK, CARRY, CARRY, MOVE], 'Upgrader1', {role: 'upgrader'});}

        else if (typeof Game.creeps['Builder1'] == 'undefined'){
            spawn.createCreep([WORK, CARRY, CARRY, MOVE], 'Builder1', {role: 'builder'});}

            spawn.room.createConstructionSite(spawn.pos.x -1, spawn.pos.y, STRUCTURE_EXTENSION);
            spawn.room.createConstructionSite(spawn.pos.x -1, spawn.pos.y +1, STRUCTURE_EXTENSION);
            spawn.room.createConstructionSite(spawn.pos.x, spawn.pos.y +1, STRUCTURE_EXTENSION);
            spawn.room.createConstructionSite(spawn.pos.x +1, spawn.pos.y +1, STRUCTURE_EXTENSION);
            spawn.room.createConstructionSite(spawn.pos.x +1 , spawn.pos.y , STRUCTURE_EXTENSION);
    }

    roleManager.run(spawn);
}
